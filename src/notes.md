
ui: {
  active: {
    puzzle ?, square, group, set, permutation
  }
  filters: {
    all:
    some:
    none: 
  },
  -> mode: from type of active puzzle
}

a consideration could be a derived diff

a puzzle:
squares
value
answer
ui_status: none, mistake, reason_for_conflict
pos[row, col]
user yes
user no
  -> group yes and group no
    -> dom element
cages
group: ref,
  result
operation
  ->
  groups
squares: array of refs to squares
user yes
user no
user one of: [[], []]
set_eliminations
permutation_eliminations
set_stars
permutation_stars
math_possibilies_eliminated ? bool
  -> sets
  -> mathematical possibilities
    -> implication eliminations
      -> if an implication is constrained to just this group

active puzzle
consideration puzzles with diff algorithms comparing to active

a consideration is still possible if there are no contradictions:
current square possiblities don't overlap with conserations
group possibilities don't overlap
a consideration is activated when:
current square possiblities subset of consideration's
group possibilities subset of considerations

active:
mode: ['primary', null], ['consider', int], ['implication', int]



* View:
* single info box on the right, with
  * selected square at the top
  * groups below (default is cage, can add more; swipe or arrow through them)
    * optional: show little diagram of group in info box
  * group consists of a bunch of sets of numbers
    * each set lists the numbers in ascending order, as well as
      * num valid permutations
      * has an implication?
      * num of indirect implications
    * in addition to filters, you can search (especially useful for early on when there could be 30 possibilites) and star considerations you think are especially likely
    * 'eliminate mathematical impossibilities' filters only mathematically possible combination
    * 'eliminate unstarred possibilities'
    * filters: show only those that (same as rules)
      *  conditional elimination added
    * rules: must include, includes one of:, can't include:
    * selecting a list allows you to toggle through the permutations, which show up to the right or below
      * show up on the screen greyed out
    * derivations:
      * must include, can't include, includes one of, autogenerated (options menu)
    * filter
    * eliminated manually, eliminated by calculator, eliminated by implications
  * c: consideration mode
    * c toggles consideration mode
    * when in consideration mode, every move made is yellow
    * to add an implication, press 'i':
      * yellow remains on the screen, you can provide any implications you want
      * when you're done, press 'd'
    * to play out an implication, press 'p':
      * yellow is locked in, looks like you're in a regular game
    * in either case, when you revert, rules are automatically applied to groups / squares
    * shortcut: when filtering, can make filters a condition to add a conditional rule
      * essentially: make filters considered rules and immediately enter into an implication
    * in general: pressing 'i' when not in consideration mode automatically adds the current selection or filter as a consideration
  
  

What I need to do:
-- keep track of implications
  -- what is an implication?
    -- a particular set of moves
    -- and their consequences
  -- the ideal system:
    -- track changes of 'mind':
    - changing the value of a square
    - removing a filter
  -- as soon as a change of mind occurs, every existing consideration gets that change of mind added to their 'premise'
  -- a premise is essentially a set of actions, diffs, or patches
    --- try to figure out if there is some way to essentially merge patches so that 'undos' are eliminated
    --- to test, whether patches emit
-- use implications to narrow down current possible combinations
-- determine which implications are relevant at a given time